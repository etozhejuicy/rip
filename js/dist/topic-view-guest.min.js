var TopicGuest={id:null,version:"1.0.0",init:function(){console.log("[TopicGuest] Connected. Version "+this.version)}};function loadPollResults(container,showModal,toggleBlock){container=void 0===container?$("#poll-results-container"):$(container),void 0===showModal&&(showModal=!0),void 0===toggleBlock&&(toggleBlock=!1),console.log("toggleBlock: "+toggleBlock),requestHandler.ajaxRequest("/api/forum/getPollResults",{tid:TopicGuest.id},function(response){container.empty(),$(response).each(function(){total=void 0===this.total?0:this.total,percentage=void 0===this.percentage?0:this.percentage;var str='<li class="poll-result">';str+='<div class="voted-icon-cell"></div>',str+='<h3 class="option-text">',str+=this.name,str+="</h3>",str+='<div class="bar-cell">',str+='<span class="bar-container">',str+='<span class="bar" style="width: '+percentage+'%"></span>',str+="</span>",str+="</div>",str+='<div class="count">',str+=total+" голосов",str+="</div>",str+='<div class="percentage">',str+=percentage+"%",str+="</div>",str+="</li>",container.append(str)}),""!==toggleBlock&&"results"===toggleBlock&&($("#poll-variants-block").hide(),$("#poll-vote-btn").hide(),$("#poll-results-btn").hide(),$("#poll-revote-btn-ajax").show(),$("#poll-revote-btn").show(),$("#poll-results").show()),showModal&&$("#poll-resultsModal").modal("show")})}function initPostLinks(){$(document).on("click",".item-post-link",function(e){e.preventDefault()});var clipboard=new Clipboard(".item-post-link",{text:function(trigger){return link="https://"+Utils.server_name+"/"+Utils.prefix+"posts/"+$(trigger).data("id")+"/",link}});clipboard.on("success",function(e){console.log("[clipboard] "+e.action+" ("+e.text+")"),$(".share-comment > input").hide(),e.clearSelection(),Utils.notify("Ссылка скопирована")}),clipboard.on("error",function(e){console.warn("[clipboard] can't copy text"),$(".share-comment > input").focus().select(),Utils.notify("Что бы скопировать ссылку<br>Нажмите CTRL+C")})}$(document).ready(function(){$(".post-select").each(function(){$(this).prop("checked",!1)}),$(".bbcode-container").each(function(){$(this).html($(this).html().trim())})}),$(document).mousedown(function(e){var container=$("#reply-tooltip");container.is(e.target)||0!==container.has(e.target).length||container.hide()}),initPostLinks();
//# sourceMappingURL=topic-view-guest.min.js.map